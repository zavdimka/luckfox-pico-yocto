# Luckfox Pico Linux Distribution Configuration
# Based on Poky reference distribution

require conf/distro/poky.conf

DISTRO = "luckfox"
DISTRO_NAME = "Luckfox Pico Linux"
DISTRO_VERSION = "1.0"
DISTRO_CODENAME = "pico"

MAINTAINER = "Dmitry Zavgorodniy <zavdimka@gmail.com>"

# SDK version info
SDK_VENDOR = "-luckfoxsdk"
SDK_VERSION = "${@d.getVar('DISTRO_VERSION').replace('snapshot-${METADATA_REVISION}', 'snapshot')}"
SDK_VERSION[vardepvalue] = "${SDK_VERSION}"

SDK_NAME = "${DISTRO}-${TCLIBC}-${SDKMACHINE}-${IMAGE_BASENAME}-${TUNE_PKGARCH}-${MACHINE}"
SDKPATHINSTALL = "/opt/${DISTRO}/${SDK_VERSION}"

# Target OS info
TARGET_VENDOR = "-luckfox"

# Remove Poky warning from login banner
POKY_DEFAULT_DISTRO_FEATURES:remove = "ptest"

# Distro features - optimized for embedded RV1106
DISTRO_FEATURES:append = " usrmerge"
DISTRO_FEATURES:remove = "x11 wayland vulkan opengl systemd"
DISTRO_FEATURES_BACKFILL_CONSIDERED:append = " systemd"

# Use sysvinit as init system
VIRTUAL-RUNTIME_init_manager = "sysvinit"
VIRTUAL-RUNTIME_initscripts = "initscripts"
VIRTUAL-RUNTIME_login_manager = "busybox"
VIRTUAL-RUNTIME_dev_manager = "busybox-mdev"

# Kernel and bootloader preferences
PREFERRED_PROVIDER_virtual/kernel = "linux-luckfox"
PREFERRED_PROVIDER_virtual/bootloader = "u-boot-luckfox"

# Package management
PACKAGE_CLASSES ?= "package_ipk"

# Extra image features
EXTRA_IMAGE_FEATURES ?= "debug-tweaks ssh-server-dropbear package-management"

# Toolchain settings
# Note: Using glibc for Yocto build system
# The external uClibc toolchain is used via luckfox-ext-toolchain.bbclass
TCLIBC = "glibc"

# Version control
DISTRO_VERSION[vardepsexclude] = "DATE"
SDK_VERSION[vardepsexclude] = "DATE"
